## Makefile.am fragment sourced by src/Makefile.am.

#
# Sodipodi svg wrapper
# Author: Lauris Kaplinski <lauris@ariman.ee>
# Most code is actually written by Raph Levien
#
# Implements svg interpretation of xml tree
#

svg/all: svg/libspsvg.a

svg/clean:
	rm -f svg/libspsvg.a $(svg_libspsvg_a_OBJECTS)

svg_libspsvg_a_SOURCES =	\
	svg/css-ostringstream.h	\
	svg/css-ostringstream.cpp	\
	svg/gnome-canvas-bpath-util.cpp	\
	svg/gnome-canvas-bpath-util.h	\
	svg/itos.cpp	\
	svg/path-string.h	\
	svg/path-string.cpp \
	svg/round.cpp	\
	svg/stringstream.h	\
	svg/stringstream.cpp	\
	svg/strip-trailing-zeros.h	\
	svg/strip-trailing-zeros.cpp	\
	svg/svg-affine.cpp	\
	svg/svg-color.cpp	\
	svg/svg-color.h 	\
        svg/svg-icc-color.h \
	svg/svg-length.cpp	\
	svg/svg-length.h	\
	svg/svg-path.cpp	\
	svg/svg.h


# This CxxTest stuff is adapted blindly from libnr/Makefile_insert.
# It would be nice to reduce the amount of boilerplate / copy&paste here.
svg/test-svg-main.cpp: svg/test-svg.cpp
	$(top_srcdir)/cxxtest/cxxtestgen.pl --template=$(srcdir)/selfname.tpl -root -o svg/test-svg-main.cpp $(svg_test_svg_includes)

svg/test-svg.cpp: $(svg_test_svg_includes) svg/Makefile_insert
	$(top_srcdir)/cxxtest/cxxtestgen.pl -part -o svg/test-svg.cpp $(svg_test_svg_includes)

svg_test_svg_includes = \
	$(srcdir)/svg/css-ostringstream-test.h	\
	$(srcdir)/svg/stringstream-test.h	\
	$(srcdir)/svg/svg-color-test.h \
	$(srcdir)/svg/svg-path-test.h

svg_libtest_svg_a_SOURCES = \
	svg/test-svg.cpp	\
	$(svg_test_svg_includes)

svg_libtest_stubs_a_SOURCES = \
	svg/test-stubs.cpp svg/test-stubs.h

svg_test_svg_SOURCES = \
	svg/test-svg-main.cpp	\
	$(svg_test_svg_includes)

svg_test_svg_LDADD = \
	svg/libspsvg.a	\
	svg/libtest-svg.a 	\
	svg/libtest-stubs.a 	\
	$(INKSCAPE_LIBS)
