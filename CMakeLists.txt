PROJECT(inkscape CXX C)
SET(INKSCAPE_VERSION 0.46+devel)
SET(PROJECT_NAME inkscape)
SET(CMAKE_BACKWARDS_COMPATIBILITY 2.4)
SET(CMAKE_INCLUDE_CURRENT_DIR TRUE)

SET(CMAKE_INSTALL_RPATH ${CMAKE_INSTALL_PREFIX}/lib)
SET(CMAKE_SKIP_RPATH:BOOL OFF)
SET(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/CMakeScripts)
INCLUDE(ConfigCompileFlags)
INCLUDE(ConfigInkscapeDepends)

SET(CONFIG_H "${CMAKE_CURRENT_BINARY_DIR}/config.h")
INCLUDE_DIRECTORIES (src/ ${CMAKE_CURRENT_BINARY_DIR} )
LINK_DIRECTORIES (src/)

#SET(CMAKE_MAJOR_MINOR "${CMAKE_MAJOR_VERSION}.${CMAKE_MINOR_VERSION}")
#IF("${CMAKE_MAJOR_MINOR}" STREQUAL "2.2")
#    SET(CMAKE_AR "ar")
#    SET(CMAKE_RANLIB "ranlib")
#ENDIF("${CMAKE_MAJOR_MINOR}" STREQUAL "2.2")

#make dist target
SET(INKSCAPE_DIST_PREFIX "${PROJECT_NAME}-${INKSCAPE_VERSION}")
ADD_CUSTOM_TARGET(dist svn export --force -q "${CMAKE_SOURCE_DIR}" "${CMAKE_BINARY_DIR}/${INKSCAPE_DIST_PREFIX}" 
		COMMAND tar -czf "${CMAKE_BINARY_DIR}/${INKSCAPE_DIST_PREFIX}.tar.gz" -C "${CMAKE_BINARY_DIR}" --exclude=".hidden" ${INKSCAPE_DIST_PREFIX}
		WORKING_DIRECTORY "${CMAKE_SOURCE_DIR}")

#make unistall target
CONFIGURE_FILE(
  "${CMAKE_CURRENT_SOURCE_DIR}/cmake_uninstall.cmake.in"
  "${CMAKE_CURRENT_BINARY_DIR}/cmake_uninstall.cmake"
  IMMEDIATE @ONLY)

ADD_CUSTOM_TARGET(uninstall
  "${CMAKE_COMMAND}" -P "${CMAKE_CURRENT_BINARY_DIR}/cmake_uninstall.cmake")

SET(folders
src
cxxtest
share
doc
#doc-pak
po
)

FOREACH(dirlist ${folders})
ADD_SUBDIRECTORY(${dirlist})
ENDFOREACH(dirlist)

