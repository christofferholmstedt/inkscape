

include ./Makefile.mingw.common


all:	config.h
	$(MAKE) -C po  -f Makefile.mingw
	$(MAKE) -C src -f Makefile.mingw

config.h: config.h.mingw
	$(CP) config.h.mingw config.h

dist:
	$(MAKE) -C src -f Makefile.mingw
	-$(RMDIR) inkscape
	$(MKDIR) inkscape
	$(CP) src$(S)inkscape.exe inkscape
#	$(CP) src$(S)inkview.exe inkscape
#	$(CP) src$(S)inkscape.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)freetype6.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)libatk-1.0-0.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)libgdk-win32-2.0-0.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)libgdk_pixbuf-2.0-0.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)libglib-2.0-0.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)libgmodule-2.0-0.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)libgobject-2.0-0.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)libgtk-win32-2.0-0.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)libgthread-2.0-0.dll inkscape
#	$(CP) $(GTKDOS)$(S)bin$(S)libiconv-2.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)libpango-1.0-0.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)libpangoft2-1.0-0.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)libpangowin32-1.0-0.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)freetype6.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)libfontconfig-1.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)libxml2-2.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)jpeg62.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)libpng12.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)msvcr70.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)zlib1.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)iconv.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)intl.dll inkscape
	$(CP) $(GTKDOS)$(S)bin$(S)xmlparse.dll inkscape
	$(CP) $(GTKDOS)$(S)perl$(S)bin$(S)perl58.dll inkscape
	$(CP) $(GTKDOS)$(S)python$(S)python24.dll inkscape
	$(CPDIR) $(GTKDOS)$(S)etc inkscape$(S)etc
	echo "#### Inserted by Inkscape Makefile.mingw" > inkscape$(S)etc$(S)gtk-2.0$(S)gtkrc
	echo "gtk-font-name=\"verdana 9\""             >> inkscape$(S)etc$(S)gtk-2.0$(S)gtkrc
	echo ""                                        >> inkscape$(S)etc$(S)gtk-2.0$(S)gtkrc
	$(MKDIR) inkscape$(S)lib
	$(CPDIR) $(GTKDOS)$(S)lib$(S)gtk-2.0 inkscape$(S)lib$(S)gtk-2.0
	$(CPDIR) $(GTKDOS)$(S)lib$(S)glib-2.0 inkscape$(S)lib$(S)glib-2.0
	$(CPDIR) $(GTKDOS)$(S)lib$(S)locale inkscape$(S)lib$(S)locale
	$(CPDIR) $(GTKDOS)$(S)lib$(S)pango inkscape$(S)lib$(S)pango
	$(MKDIR) inkscape$(S)fonts
	$(CP) $(GTKDOS)$(S)fonts$(S)*.ttf inkscape$(S)fonts
	$(CPDIR) share inkscape$(S)share
	$(CPDIR) $(GTKDOS)$(S)share$(S)themes inkscape$(S)share
	$(CPDIR) doc inkscape$(S)doc
	$(MKDIR) inkscape$(S)data
	$(MKDIR) inkscape$(S)locale
	$(MAKE) -C po -f Makefile.mingw dist
	$(MKDIR) inkscape$(S)modules
	$(MKDIR) inkscape$(S)plugins
	-$(CP) src$(S)extension$(S)plugin$(S)*.dll inkscape$(S)plugins
	$(CP) $(GTKDOS)$(S)bin$(S)gdb.exe inkscape
	@echo "##################### D O N E ####################"

clean:
	-$(RMDIR) inkscape
	-$(RM) inkscape*.zip
	$(MAKE) -C src -f Makefile.mingw clean
	$(MAKE) -C po  -f Makefile.mingw clean

minimal:
	$(MAKE) -C src -f Makefile.mingw
	$(RM) inkscape$(S)inkscape.exe
	$(CP) src$(S)inkscape.exe inkscape
	@echo "##################### D O N E ####################"


